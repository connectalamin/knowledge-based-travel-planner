<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voyager - Smart Travel Planner</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="">
    <link rel="stylesheet" href="style.css?v=4">
</head>
<body>

<!-- Toast Container -->
<div id="toastContainer" class="toast-container"></div>

<!-- Comparison Modal -->
<div id="comparisonModal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h2><i class="fa-solid fa-scale-balanced"></i> Compare Destinations</h2>
            <button class="modal-close" onclick="closeComparisonModal()">
                <i class="fa-solid fa-xmark"></i>
            </button>
        </div>
        <div class="modal-body" id="comparisonBody">
            <!-- Comparison table will be injected here -->
        </div>
    </div>
</div>

<div class="app-container">
    <!-- LEFT SIDEBAR: INPUTS -->
    <aside class="sidebar">
        <div class="brand">
            <i class="fa-solid fa-plane-departure"></i>
            <h1>Voyager</h1>
            <button id="themeToggle" class="theme-toggle" onclick="toggleTheme()" title="Toggle dark mode">
                <i class="fa-solid fa-moon"></i>
            </button>
        </div>

        <div id="travelForm">
            <!-- Budget -->
            <div class="form-group">
                <label for="budget">Budget Level</label>
                <div class="input-wrapper select-wrapper">
                    <i class="fa-solid fa-wallet"></i>
                    <select id="budget">
                        <option value="low">Budget Friendly ($)</option>
                        <option value="medium" selected>Moderate ($$)</option>
                        <option value="high">Luxury ($$$)</option>
                    </select>
                </div>
            </div>

            <!-- Days Available -->
            <div class="form-group">
                <label for="days">Days Available</label>
                <div class="input-wrapper">
                    <i class="fa-solid fa-calendar-days"></i>
                    <input id="days" type="number" min="1" max="30" value="7">
                </div>
            </div>

            <!-- Continent -->
            <div class="form-group">
                <label for="continent">Region</label>
                <div class="input-wrapper select-wrapper">
                    <i class="fa-solid fa-globe"></i>
                    <select id="continent">
                        <option value="asia" selected>Asia</option>
                        <option value="europe">Europe</option>
                        <option value="middle_east">Middle East</option>
                        <option value="africa">Africa</option>
                        <option value="north_america">North America</option>
                        <option value="south_america">South America</option>
                        <option value="oceania">Oceania</option>
                    </select>
                </div>
            </div>

            <!-- Climate -->
            <div class="form-group">
                <label for="climate">Preferred Climate</label>
                <div class="input-wrapper select-wrapper">
                    <i class="fa-solid fa-temperature-half"></i>
                    <select id="climate">
                        <option value="warm" selected>Warm & Sunny</option>
                        <option value="cool">Cool & Mild</option>
                        <option value="cold">Cold & Snowy</option>
                    </select>
                </div>
            </div>

            <!-- Visa Status -->
            <div class="form-group">
                <label for="visa">Visa Status</label>
                <div class="input-wrapper select-wrapper">
                    <i class="fa-solid fa-passport"></i>
                    <select id="visa">
                        <option value="visa_free" selected>Visa Free</option>
                        <option value="visa_on_arrival">Visa on Arrival</option>
                        <option value="visa_required">Visa Required</option>
                        <option value="schengen_required">Schengen Required</option>
                    </select>
                </div>
            </div>

            <!-- Safety Priority -->
            <div class="form-group">
                <label for="safety">Safety Priority</label>
                <div class="range-wrapper">
                    <span class="range-label">Standard</span>
                    <input type="range" id="safety" min="1" max="5" value="3" step="1">
                    <span class="range-label">Strict</span>
                    <span class="range-value" id="safetyValue">3</span>
                </div>
            </div>

            <!-- Travel Month -->
            <div class="form-group">
                <label for="month">Month of Travel</label>
                <div class="input-wrapper select-wrapper">
                    <i class="fa-solid fa-calendar"></i>
                    <select id="month">
                        <option value="0">Flexible</option>
                        <option value="1">January</option>
                        <option value="2">February</option>
                        <option value="3">March</option>
                        <option value="4">April</option>
                        <option value="5">May</option>
                        <option value="6">June</option>
                        <option value="7">July</option>
                        <option value="8">August</option>
                        <option value="9">September</option>
                        <option value="10" selected>October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                    </select>
                </div>
            </div>

            <!-- Activities (Chips) -->
            <div class="form-group">
                <label for="activityInput">Interests (Keywords)</label>
                <div class="chips-container" id="chipsContainer">
                    <span class="chip" data-activity="beach">beach <i class="fa-solid fa-xmark chip-remove"></i></span>
                    <span class="chip" data-activity="hiking">hiking <i class="fa-solid fa-xmark chip-remove"></i></span>
                </div>
                <div class="input-wrapper" style="position: relative;">
                    <i class="fa-solid fa-hashtag"></i>
                    <input id="activityInput" type="text" placeholder="Type to add interest..." autocomplete="off">
                    <div id="suggestions" class="suggestions-dropdown"></div>
                </div>
            </div>

            <!-- Food Preference -->
            <div class="form-group">
                <label for="food">Food Preference</label>
                <div class="input-wrapper select-wrapper">
                    <i class="fa-solid fa-utensils"></i>
                    <select id="food">
                        <option value="any" selected>Any</option>
                        <option value="street">Street Food</option>
                        <option value="seafood">Seafood</option>
                        <option value="fine_dining">Fine Dining</option>
                    </select>
                </div>
            </div>

            <!-- Live Match Counter -->
            <div class="match-counter" id="matchCounter">
                <i class="fa-solid fa-compass"></i>
                <span id="matchCountText">Calculating matches...</span>
            </div>

            <div style="display: flex; gap: 10px;">
                <button id="recommendBtn" class="btn-primary" onclick="findDestinations()" style="flex: 2;">
                    <i class="fa-solid fa-sparkles"></i> Generate Plan
                </button>
                <button class="btn-primary" onclick="resetForm()" style="flex: 1; background-color: var(--secondary);">
                    <i class="fa-solid fa-rotate-right"></i>
                </button>
            </div>
        </div>
    </aside>

    <!-- RIGHT AREA: RESULTS -->
    <main class="results-area" id="resultsContainer">
        <!-- View Toggle Tabs -->
        <div class="view-tabs" id="viewTabs" style="display: none;">
            <button class="view-tab active" data-view="cards" onclick="switchView('cards')">
                <i class="fa-solid fa-grip"></i> Cards
            </button>
            <button class="view-tab" data-view="map" onclick="switchView('map')">
                <i class="fa-solid fa-map"></i> Map
            </button>
        </div>

        <!-- Initial State -->
        <div class="hero-text" id="initialState">
            <i class="fa-solid fa-map-location-dot"></i>
            <h2>Where to next?</h2>
            <p>Adjust the filters on the left and let our AI find your perfect getaway.</p>
        </div>

        <!-- Cards View -->
        <div id="cardsView" style="display:none;"></div>

        <!-- Map View -->
        <div id="mapView" class="map-view" style="display:none;">
            <div id="map" class="leaflet-map"></div>
        </div>

        <!-- Floating Compare Button -->
        <button id="compareBtn" class="compare-floating-btn" style="display: none;" onclick="openComparisonModal()">
            <i class="fa-solid fa-scale-balanced"></i>
            Compare (<span id="compareCount">0</span>/3)
        </button>
    </main>
</div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
<script src="script.js?v=3"></script>
</body>
</html>
